schema: '2.0'
stages:
  prepare_data:
    cmd: python src/data_preparation/prepare_data.py
    deps:
    - path: data/raw/service_tickets.csv
      hash: md5
      md5: a05aa13d753884547cc46e6f525bfb82
      size: 14568920
    - path: src/data_preparation/prepare_data.py
      hash: md5
      md5: 08060da3ff5c9185f1b30e9d296f4800
      size: 8093
    params:
      params.yaml:
        prepare.min_text_length: 10
        prepare.random_state: 42
        prepare.train_size: 0.8
    outs:
    - path: data/processed/label_encoder.pkl
      hash: md5
      md5: 7f7ac1d553d6f88e5ecce4a97118077f
      size: 355
    - path: metrics/data_preparation.json
      hash: md5
      md5: a396a37b8e09bc5a628d4f35026a0681
      size: 1079
  train_tfidf:
    cmd: python -m src.tfidf_service.train_tfidf
    deps:
    - path: data/processed/train.csv
      hash: md5
      md5: 024fe985f9fcaf7a10ff0af48c8e2f51
      size: 22897494
    - path: src/tfidf_service/train_tfidf.py
      hash: md5
      md5: 54cf2684ea7f00fd6466bf6338409210
      size: 8226
    params:
      params.yaml:
        tfidf_train:
          max_features: 5000
          ngram_range:
          - 1
          - 2
          min_df: 2
          max_df: 0.8
    outs:
    - path: metrics/tfidf_metrics.json
      hash: md5
      md5: 5b97daac1e900bce519339565ef517c6
      size: 3486
    - path: models/tfidf_model.pkl
      hash: md5
      md5: 0d0f4e19d53c61513da0b08c2cd0447e
      size: 22165477
    - path: models/tfidf_vectorizer.pkl
      hash: md5
      md5: 2d8439f1a08a1438e9f3ac298ec1d337
      size: 6374366
  train_transformer:
    cmd: python -m src.transformer_service.train_transformer
    deps:
    - path: data/processed/train.csv
      hash: md5
      md5: 024fe985f9fcaf7a10ff0af48c8e2f51
      size: 22897494
    - path: src/transformer_service/train_transformer.py
      hash: md5
      md5: 0279fb303eed509d3cfde8aa05ae81c4
      size: 8239
    params:
      params.yaml:
        transformer_train:
          model_name: distilbert-base-multilingual-cased
          max_length: 512
          batch_size: 16
          learning_rate: 2e-05
          num_epochs: 3
    outs:
    - path: metrics/transformer_metrics.json
      hash: md5
      md5: 561852e064b414be21fe8f00bd8d6c79
      size: 801
    - path: models/transformer_model/config.json
      hash: md5
      md5: 7b86752981053a82d6cbe3815ba10f86
      size: 1042
    - path: models/transformer_model/special_tokens_map.json
      hash: md5
      md5: 4725a11f0c217363800cfbc4a6c49a1e
      size: 132
    - path: models/transformer_model/tokenizer.json
      hash: md5
      md5: 35e0daebe98eb319ded65778c122315f
      size: 2919362
    - path: models/transformer_model/tokenizer_config.json
      hash: md5
      md5: 83346f597506d1769f8454da11247c91
      size: 1284
